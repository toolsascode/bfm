x-default-logging: &logging
  logging:
    driver: "json-file"
    options:
      max-size: "5m"
      max-file: "2"
      tag: "{{.Name}}"
services:
  ffm:
    <<: *logging
    build:
      context: ..
      dockerfile: Dockerfile
    container_name: ffm-frontend
    ports:
      - "4040:80"
    environment:
      - BFM_FRONTEND_API_URL=${BFM_FRONTEND_API_URL:-/api}
      - BFM_FRONTEND_API_TOKEN=${BFM_FRONTEND_API_TOKEN:-SFXfytYJr3RfrjPMgEkhTEukOGpjhtLEmmJFYv+7GHQ=}
      - BFM_FRONTEND_AUTH_ENABLED=${BFM_FRONTEND_AUTH_ENABLED:-true}
      - BFM_FRONTEND_AUTH_USERNAME=${BFM_FRONTEND_AUTH_USERNAME:-admin}
      - BFM_FRONTEND_AUTH_PASSWORD=${BFM_FRONTEND_AUTH_PASSWORD:-admin123}
    depends_on:
      - bfm-server
    networks:
      - bfm-network
    restart: unless-stopped

  # Note: The BFM server is defined in bfm/deploy/docker-compose.yml
  # The bfm-network is also defined there and will be shared via the include mechanism

